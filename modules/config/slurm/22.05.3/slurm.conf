# slurm.conf file generated by configurator.html.
# Put this file on all nodes of your cluster.
# See the slurm.conf man page for more information.
#
SlurmctldHost=apo
#SlurmctldHost=
# 
AuthType=auth/munge
#DisableRootJobs=NO 
EnforcePartLimits=ALL 
MaxArraySize=10001
#Epilog=
#EpilogSlurmctld= 
#FirstJobId=1 
#MaxJobId=999999 
#GresTypes= 
#GroupUpdateForce=0 
#GroupUpdateTime=600 
#JobFileAppend=0 
#JobRequeue=1 
#JobSubmitPlugins=1 
#KillOnBadExit=0 
#LaunchType=launch/slurm 
#Licenses=foo*4,bar 
MailProg=/usr/bin/msmtp2
#MaxJobCount=5000 
#MaxStepCount=40000 
#MaxTasksPerNode=128 
MpiDefault=pmix # 2022-09-14 camw
#MpiParams=ports=#-# 
#PluginDir= 
#PlugStackConfig= 
#PrivateData=jobs 
ProctrackType=proctrack/cgroup
#Prolog=
#PrologFlags= 
#PrologSlurmctld= 
#PropagatePrioProcess=0 
#PropagateResourceLimits= 
#PropagateResourceLimitsExcept= 
RebootProgram= /sbin/reboot
ReturnToService=1
SlurmctldPidFile=/var/run/slurmctld.pid
SlurmctldPort=6817
SlurmdPidFile=/var/run/slurmd.pid
SlurmdPort=6818
SlurmdSpoolDir=/var/spool/slurmd
SlurmUser=slurm
#SlurmdUser=root 
#SrunEpilog=
#SrunProlog=
StateSaveLocation=/var/spool/slurmd
SwitchType=switch/none
#TaskEpilog=
#TaskPlugin=task/cgroup
#TaskProlog=
#TopologyPlugin=topology/tree 
#TmpFS=/tmp 
#TrackWCKey=no 
#TreeWidth= 
#UnkillableStepProgram= 
#UsePAM=0 
# 
# 
# TIMERS 
#BatchStartTimeout=10 
#CompleteWait=0 
#EpilogMsgTime=2000 
#GetEnvTimeout=2 
#HealthCheckInterval=0 
#HealthCheckProgram= 
InactiveLimit=0
KillWait=30
#MessageTimeout=10 
#ResvOverRun=0 
MinJobAge=300
#OverTimeLimit=0 
SlurmctldTimeout=120
SlurmdTimeout=300
#UnkillableStepTimeout=60 
#VSizeFactor=0 
Waittime=0
# 
# 
# SCHEDULING 
DefMemPerCPU=2000 
#MaxMemPerCPU=0 
#SchedulerTimeSlice=30 
SchedulerType=sched/backfill
SelectType=select/cons_tres
SelectTypeParameters=CR_Core_Memory
# 
# 
# JOB PRIORITY 
#PriorityFlags= 
PriorityType=priority/multifactor 
PriorityDecayHalfLife=14-0
#PriorityCalcPeriod= 
PriorityFavorSmall=NO
PriorityMaxAge=14-0
#PriorityUsageResetPeriod= 
PriorityWeightAge= 1000
PriorityWeightFairshare=10000
PriorityWeightJobSize=0
PriorityWeightPartition=0
PriorityWeightQOS=1
PreemptType=preempt/partition_prio
PreemptMode=GANG,SUSPEND
# 
# 
# LOGGING AND ACCOUNTING 
AccountingStorageEnforce=Associations,limits,qos
AccountingStorageHost=apo
AccountingStorageUser=slurm
#AccountingStoragePass=Trig.chest
#AccountingStoragePort=
AccountingStorageType=accounting_storage/slurmdbd
#AccountingStoreJobComment=YES
AccountingStoreFlags=job_comment
AccountingStorageTRES=gres/gpu
GresTypes=gpu
ClusterName=hpc2
#DebugFlags= 
#JobCompHost=
#JobCompLoc=
#JobCompPass=
#JobCompPort=
JobCompType=jobcomp/none
#JobCompUser=
#JobContainerType=job_container/none 
JobAcctGatherFrequency=30
JobAcctGatherType=jobacct_gather/cgroup
SlurmctldDebug=verbose
SlurmctldSyslogDebug=verbose
#SlurmctldLogFile=
SlurmdDebug=info
#SlurmdLogFile=
#SlurmSchedLogFile= 
#SlurmSchedLogLevel= 
# 
# 
# POWER SAVE SUPPORT FOR IDLE NODES (optional) 
#SuspendProgram= 
#ResumeProgram= 
#SuspendTimeout= 
#ResumeTimeout= 
#ResumeRate= 
#SuspendExcNodes= 
#SuspendExcParts= 
#SuspendRate= 
#SuspendTime= 
# 
# 
# COMPUTE NODES 
NodeName=agate-[0-43]  RealMemory=256000  Sockets=2 CoresPerSocket=32 ThreadsPerCore=2 State=UNKNOWN 
NodeName=emerald-[0-1] RealMemory=1024000 Sockets=2 CoresPerSocket=32 ThreadsPerCore=2 State=UNKNOWN Gres=gpu:a100_80:4
NodeName=ccnl-0        RealMemory=256000  Sockets=1 CoresPerSocket=32 ThreadsPerCore=1 State=UNKNOWN Gres=gpu:a100_40:4
# PARTITIONS
#
PartitionName=low  Nodes=agate-[0-43] Default=NO  State=UP PriorityTier=10 PreemptMode=requeue OverSubscribe=NO      DefaultTime=0 MaxTime=60-00
PartitionName=med  Nodes=agate-[0-43] Default=NO  State=UP PriorityTier=20 PreemptMode=suspend OverSubscribe=FORCE:1 DefaultTime=0 MaxTime=60-00
PartitionName=high Nodes=agate-[0-43] Default=YES State=UP PriorityTier=30 PreemptMode=Off     OverSubscribe=FORCE:1 DefaultTime=0 MaxTime=60-00
#
#PartitionName=gpu Nodes=emerald-[0-1] Default=NO MaxTime=INFINITE State=UP PriorityTier=30 PreemptMode=Off     DefaultTime=0
PartitionName=gpu-ccnl  Nodes=ccnl-0    Default=NO MaxTime=15-00 State=UP OverSubscribe=NO PriorityTier=30 PreemptMode=Off DefaultTime=0
PartitionName=gpu-zhang Nodes=emerald-0 Default=NO MaxTime=15-00 State=UP OverSubscribe=NO PriorityTier=30 PreemptMode=Off DefaultTime=0
PartitionName=gpu-sasan Nodes=emerald-1 Default=NO MaxTime=15-00 State=UP OverSubscribe=NO PriorityTier=30 PreemptMode=Off DefaultTime=0

#PartitionName=testlow  Nodes=agate-[1] Default=NO  MaxTime=INFINITE State=UP PriorityTier=10 PreemptMode=requeue OverSubscribe=NO      DefaultTime=0
#PartitionName=testmed  Nodes=agate-[1] Default=NO  MaxTime=INFINITE State=UP PriorityTier=20 PreemptMode=suspend OverSubscribe=FORCE:1 DefaultTime=0
#PartitionName=testhigh Nodes=agate-[1] MaxTime=INFINITE State=UP PriorityTier=30 PreemptMode=Off     OverSubscribe=FORCE:1 DefaultTime=0
