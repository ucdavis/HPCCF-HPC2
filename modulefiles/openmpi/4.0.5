#%Module1.0#####################################################################

set name "OpenMPI"
set dir "openmpi"
set version "4.0.5"
set os "ucdhpc-20.04"
set note "OpenMPI is an implementation of the Message Passing Interface.\n     http://www.openmpi.org."

# requirements here
if ![ is-loaded openmpi/4.1.0 ] { module unload openmpi/4.1.0 }

set swroot "/software"
module-whatis "This module loads $name version $version for $os. $note"

prepend-path PATH $swroot/$dir/$version/$os/bin
setenv OPENMPI_VERSION $version
setenv OPENMPI_HOME $swroot/$dir/$version/$os
setenv OPENMPI_ROOT $swroot/$dir/$version/$os
setenv MPI_ROOT $swroot/$dir/$version/$os
prepend-path LD_LIBRARY_PATH $swroot/$dir/$version/$os/lib
prepend-path CPATH $swroot/$dir/$version/$os/include
prepend-path MANPATH $swroot/$dir/$version/$os/man

# this seems to be breaking manpages. -MCL
#prepend-path MANPATH   ":$swroot/$dir/$version/$os/share/man"
#prepend-path PYTHONPATH $swroot/$dir/$version/$os/lib/python3.5/site-packages/

if { [ module-info mode load ] } {
    puts stderr "Module $dir-$version-$os loaded.\n     $note"
}

